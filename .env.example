# MTProto Proxy Configuration Template
# Copy this file to .env and modify the values according to your needs

# =============================================================================
# BASIC CONFIGURATION
# =============================================================================

# Proxy secret key (will be auto-generated if not set)
# Generate with: openssl rand -hex 16
MTG_SECRET=

# Port to listen on (default: 8443)
# Common ports: 443, 8443, 2083, 2087, 2096
MTG_PORT=8443

# IP address to bind to (0.0.0.0 for all interfaces)
MTG_BIND_IP=0.0.0.0

# Your server's public IP or domain name
# This will be used in the proxy link
SERVER_HOST=your-server.com

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================

# Number of worker processes (default: number of CPU cores)
MTG_WORKERS=2

# Buffer size for connections (default: 16384)
# Increase for better performance with many connections
MTG_BUFFER_SIZE=16384

# Connection timeout in seconds (default: 10)
MTG_TIMEOUT=10

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# Enable secure mode only (recommended: true)
MTG_SECURE_ONLY=true

# Disable IPv6 support (set to true if you don't need IPv6)
MTG_DISABLE_IPV6=false

# Anti-replay protection maximum size (default: 128)
MTG_ANTI_REPLAY_MAX_SIZE=128

# =============================================================================
# TLS CAMOUFLAGE (OPTIONAL)
# =============================================================================

# Domain for TLS camouflage (helps bypass DPI)
# Leave empty to disable TLS camouflage
MTG_DOMAIN=

# =============================================================================
# STATISTICS AND MONITORING
# =============================================================================

# IP address for statistics endpoint (default: 127.0.0.1)
MTG_STATS_IP=127.0.0.1

# Port for statistics endpoint (default: 3001)
MTG_STATS_PORT=3001

# Enable statistics endpoint (default: true)
MTG_STATS_ENABLED=true

# =============================================================================
# LOGGING
# =============================================================================

# Log level: debug, info, warn, error (default: info)
MTG_LOG_LEVEL=info

# Log format: json, text (default: text)
MTG_LOG_FORMAT=text

# =============================================================================
# DOCKER SPECIFIC SETTINGS
# =============================================================================

# Container name
CONTAINER_NAME=mtproto-proxy

# Restart policy for Docker
RESTART_POLICY=unless-stopped

# =============================================================================
# ADVANCED SETTINGS (OPTIONAL)
# =============================================================================

# Custom user agent for HTTP requests
MTG_USER_AGENT=

# Maximum number of connections per IP (0 = unlimited)
MTG_MAX_CONNECTIONS_PER_IP=0

# Rate limiting: requests per second per IP (0 = unlimited)
MTG_RATE_LIMIT=0

# Custom Telegram DC (data center) endpoints
# Leave empty to use default Telegram servers
MTG_TELEGRAM_DC=

# =============================================================================
# PROXY CHAINING (OPTIONAL)
# =============================================================================

# Upstream SOCKS5 proxy (format: socks5://user:pass@host:port)
# Leave empty to connect directly to Telegram
MTG_UPSTREAM_PROXY=

# =============================================================================
# EXAMPLE VALUES (UNCOMMENT AND MODIFY)
# =============================================================================

# Example for a production setup:
# MTG_SECRET=abcdef1234567890abcdef1234567890
# MTG_PORT=443
# SERVER_HOST=proxy.example.com
# MTG_DOMAIN=www.google.com
# MTG_WORKERS=4
# MTG_BUFFER_SIZE=32768

# Example for development:
# MTG_SECRET=dev1234567890abcdef1234567890abcd
# MTG_PORT=8443
# SERVER_HOST=localhost
# MTG_LOG_LEVEL=debug
